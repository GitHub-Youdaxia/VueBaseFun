<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js数组按某一项字段值分组</title>
</head>

<body>
    <xmp>
            var list = [
            {
                id:0,
                name:"剑圣-刺客",
                type:"刺客"
            },
            {
                id:1,
                name:"安妮-法师",
                type:"法师"
            },
            {
                id:3,
                name:"赵信-战士",
                type:"战士"
            },
            {
                id:4,
                name:"寒冰-射手",
                type:"射手"
            },
            {
                id:4,
                name:"维恩-射手",
                type:"射手"
            },
            {
                id:2,
                name:"蕾欧娜-坦克",
                type:"坦克"
            },
            {
                id:1,
                name:"拉克丝-法师",
                type:"法师"
            },
            {
                id:0,
                name:"劫-刺客",
                type:"刺客"
            },
            {
                id:1,
                name:"凤凰-法师",
                type:"法师"
            },
            {
                id:3,
                name:"皇子-战士",
                type:"战士"
            },
            {
                id:2,
                name:"龙龟-坦克",
                type:"坦克"
            }
        ]
        var result=list.reduce((total,cur,index,arr)=>{
            if(total[cur.type]==undefined){
                total[cur.type]=[];
                total[cur.type].push(cur);
            }else{
                total[cur.type].push(cur);
            }
            return total
        },{})
        console.log(result);
        var arr=[]
        for(prop in result){
            var obj={}
            obj.type=prop
            obj.list=result[prop]
            arr.push(obj)
        }
        console.log(arr);        
    </xmp>
    <script>
                var list = [
            {
                id:0,
                name:"剑圣-刺客",
                type:"刺客"
            },
            {
                id:1,
                name:"安妮-法师",
                type:"法师"
            },
            {
                id:3,
                name:"赵信-战士",
                type:"战士"
            },
            {
                id:4,
                name:"寒冰-射手",
                type:"射手"
            },
            {
                id:4,
                name:"维恩-射手",
                type:"射手"
            },
            {
                id:2,
                name:"蕾欧娜-坦克",
                type:"坦克"
            },
            {
                id:1,
                name:"拉克丝-法师",
                type:"法师"
            },
            {
                id:0,
                name:"劫-刺客",
                type:"刺客"
            },
            {
                id:1,
                name:"凤凰-法师",
                type:"法师"
            },
            {
                id:3,
                name:"皇子-战士",
                type:"战士"
            },
            {
                id:2,
                name:"龙龟-坦克",
                type:"坦克"
            }
        ]
        var result=list.reduce((total,cur,index,arr)=>{
            if(total[cur.type]==undefined){
                total[cur.type]=[];
                total[cur.type].push(cur);
            }else{
                total[cur.type].push(cur);
            }
            return total
        },{})
        console.log(result);
        var arr=[]
        for(prop in result){
            var obj={}
            obj.type=prop
            obj.list=result[prop]
            arr.push(obj)
        }
        console.log(arr);
    </script>
    <script>
        // total: 第一项的值或者上一次叠加的结果值
        // cur: 当前会参与叠加的项
        // index： 当前值的索引
        // arr: 数组本身
        (() => {
            var arr = [{
                ip: '10.210.130.1',
                port: '100'
            }, {
                ip: '10.210.130.1',
                port: '200'
            }, {
                ip: '10.210.130.1',
                port: '300'
            }, {
                ip: '10.210.130.1',
                port: '100'
            }, {
                ip: '10.210.130.1',
                port: '300'
            }, {
                ip: '10.210.130.1',
                port: '100'
            }, ];
            var result = arr.reduce((total, cur, index, arr) => {
                if (total[cur.port] == undefined) {
                    total[cur.port] = []
                    total[cur.port].push(cur)
                } else {
                    total[cur.port].push(cur)
                }
                return total;
            }, {})
            console.log(result);
        })();
        (() => {
            var arr = [3, 9, 4, 3, 6, 0, 9];
            // 1. 求数组项之和

            var sum = arr.reduce(function (prev, cur) {
                return prev + cur;
            }, 0);
            // 2. 求数组项最大值
            var max = arr.reduce(function (prev, cur) {
                return Math.max(prev, cur);
            });
            // 3. 数组去重
            var newArr = arr.reduce(function (prev, cur) {
                prev.indexOf(cur) === -1 && prev.push(cur);
                return prev;
            }, []);
            console.log({
                sum,
                max,
                newArr
            });
        })()


    </script>
</body>

</html>